{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport React, { useEffect } from 'react';\nimport Link from 'next/link';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Row, Col } from 'react-bootstrap';\nimport Product from '../components/Product';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport Paginate from '../components/Paginate';\nimport ProductCarousel from '../components/ProductCarousel';\nimport Meta from '../components/Meta';\nimport { listProducts } from '../actions/productActions';\n\nvar HomeScreen = function HomeScreen(_ref) {\n  var match = _ref.match;\n  match = match || {};\n  match.params = match.params || {};\n  var keyword = match.params.keyword;\n  var pageNumber = match.params.pageNumber || 1;\n  var dispatch = useDispatch();\n  var productList = useSelector(function (state) {\n    return state.productList;\n  });\n  var loading = productList.loading,\n      error = productList.error,\n      products = productList.products,\n      page = productList.page,\n      pages = productList.pages;\n  useEffect(function () {\n    dispatch(listProducts(keyword, pageNumber));\n  }, [dispatch, keyword, pageNumber]);\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Meta, {}), !keyword ? /*#__PURE__*/_jsx(ProductCarousel, {}) : /*#__PURE__*/_jsx(Link, {\n      to: \"/\",\n      className: \"btn btn-light\",\n      children: \"Go Back\"\n    }), /*#__PURE__*/_jsx(\"h1\", {\n      children: \"Latest Products\"\n    }), loading ? /*#__PURE__*/_jsx(Loader, {}) : error ? /*#__PURE__*/_jsx(Message, {\n      variant: \"danger\",\n      children: error\n    }) : /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(Row, {\n        children: products.map(function (product) {\n          return /*#__PURE__*/_jsx(Col, {\n            sm: 12,\n            md: 6,\n            lg: 4,\n            xl: 3,\n            children: /*#__PURE__*/_jsx(Product, {\n              product: product\n            })\n          }, product._id);\n        })\n      }), /*#__PURE__*/_jsx(Paginate, {\n        pages: pages,\n        page: page,\n        keyword: keyword ? keyword : ''\n      })]\n    })]\n  });\n};\n\nexport function getStaticPaths() {\n  return _getStaticPaths.apply(this, arguments);\n}\n\nfunction _getStaticPaths() {\n  _getStaticPaths = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _yield$axios$get, products, paths;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return axios.get('http://localhost:5000/api/products');\n\n          case 2:\n            _yield$axios$get = _context.sent;\n            products = _yield$axios$get.data;\n            console.log('what the fuck', products);\n            paths = products.map(function (product) {\n              return {\n                params: {\n                  slug: product.slug\n                }\n              };\n            });\n            return _context.abrupt(\"return\", {\n              paths: paths,\n              fallback: false\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getStaticPaths.apply(this, arguments);\n}\n\nexport default HomeScreen;","map":null,"metadata":{},"sourceType":"module"}